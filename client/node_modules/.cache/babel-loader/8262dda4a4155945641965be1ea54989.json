{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useToken } from \"./useToken\";\nexport const useUser = () => {\n  _s();\n\n  const [token] = useToken(); //get JWT from local storage\n\n  const getTokenPayload = token => {\n    //get the actuale payload of JWT\n    const encodedPayload = token.split(\".\")[1];\n    return JSON.parse(Buffer.from(encodedPayload, \"base64\"));\n  };\n\n  const [user, setUser] = useState(() => {\n    if (!token) return null;\n    return getTokenPayload(token); //set initial user details\n  });\n  useEffect(() => {\n    if (!token) {\n      setUser(null);\n    } else {\n      setUser(getTokenPayload(token));\n    }\n  }, [token]);\n  return user;\n};\n\n_s(useUser, \"BOp4h96qPFK47SKXz+JTGBNya5g=\", false, function () {\n  return [useToken];\n});","map":{"version":3,"names":["useState","useEffect","useToken","useUser","token","getTokenPayload","encodedPayload","split","JSON","parse","Buffer","from","user","setUser"],"sources":["/Users/naveen/Desktop/med-app/client/src/components/auth/useUser.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useToken } from \"./useToken\";\n\nexport const useUser = () => {\n\tconst [token] = useToken(); //get JWT from local storage\n\n\tconst getTokenPayload = (token) => {\n\t\t//get the actuale payload of JWT\n\t\tconst encodedPayload = token.split(\".\")[1];\n\t\treturn JSON.parse(Buffer.from(encodedPayload, \"base64\"));\n\t};\n\n\tconst [user, setUser] = useState(() => {\n\t\tif (!token) return null;\n\t\treturn getTokenPayload(token); //set initial user details\n\t});\n\n\tuseEffect(() => {\n\t\tif (!token) {\n\t\t\tsetUser(null);\n\t\t} else {\n\t\t\tsetUser(getTokenPayload(token));\n\t\t}\n\t}, [token]);\n\n\treturn user;\n};\n"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,QAAT,QAAyB,YAAzB;AAEA,OAAO,MAAMC,OAAO,GAAG,MAAM;EAAA;;EAC5B,MAAM,CAACC,KAAD,IAAUF,QAAQ,EAAxB,CAD4B,CACA;;EAE5B,MAAMG,eAAe,GAAID,KAAD,IAAW;IAClC;IACA,MAAME,cAAc,GAAGF,KAAK,CAACG,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAvB;IACA,OAAOC,IAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,IAAP,CAAYL,cAAZ,EAA4B,QAA5B,CAAX,CAAP;EACA,CAJD;;EAMA,MAAM,CAACM,IAAD,EAAOC,OAAP,IAAkBb,QAAQ,CAAC,MAAM;IACtC,IAAI,CAACI,KAAL,EAAY,OAAO,IAAP;IACZ,OAAOC,eAAe,CAACD,KAAD,CAAtB,CAFsC,CAEP;EAC/B,CAH+B,CAAhC;EAKAH,SAAS,CAAC,MAAM;IACf,IAAI,CAACG,KAAL,EAAY;MACXS,OAAO,CAAC,IAAD,CAAP;IACA,CAFD,MAEO;MACNA,OAAO,CAACR,eAAe,CAACD,KAAD,CAAhB,CAAP;IACA;EACD,CANQ,EAMN,CAACA,KAAD,CANM,CAAT;EAQA,OAAOQ,IAAP;AACA,CAvBM;;GAAMT,O;UACID,Q"},"metadata":{},"sourceType":"module"}