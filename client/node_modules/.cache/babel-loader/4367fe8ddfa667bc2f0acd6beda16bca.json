{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { useToken } from \"./useToken\";\nimport { atob, Buffer } from \"buffer\";\nexport const useUser = () => {\n  _s();\n\n  const [token] = useToken(); //get JWT from local storage\n\n  const getTokenPayload = token => {\n    //get the actuale payload of JWT\n    const encodedPayload = token.split(\".\")[1];\n    return JSON.parse(atob(encodedPayload));\n  };\n\n  const [user, setUser] = useState(() => {\n    if (!token) return null;\n    return getTokenPayload(token); //set initial user details\n  });\n  useEffect(() => {\n    if (!token) {\n      setUser(null);\n    } else {\n      setUser(getTokenPayload(token));\n    }\n  }, [token]);\n  return user;\n};\n\n_s(useUser, \"BOp4h96qPFK47SKXz+JTGBNya5g=\", false, function () {\n  return [useToken];\n});","map":{"version":3,"names":["useState","useEffect","useToken","atob","Buffer","useUser","token","getTokenPayload","encodedPayload","split","JSON","parse","user","setUser"],"sources":["/Users/naveen/Desktop/med-app/client/src/components/auth/useUser.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useToken } from \"./useToken\";\nimport { atob, Buffer } from \"buffer\";\n\nexport const useUser = () => {\n\tconst [token] = useToken(); //get JWT from local storage\n\n\tconst getTokenPayload = (token) => {\n\t\t//get the actuale payload of JWT\n\t\tconst encodedPayload = token.split(\".\")[1];\n\t\treturn JSON.parse(atob(encodedPayload));\n\t};\n\n\tconst [user, setUser] = useState(() => {\n\t\tif (!token) return null;\n\t\treturn getTokenPayload(token); //set initial user details\n\t});\n\n\tuseEffect(() => {\n\t\tif (!token) {\n\t\t\tsetUser(null);\n\t\t} else {\n\t\t\tsetUser(getTokenPayload(token));\n\t\t}\n\t}, [token]);\n\n\treturn user;\n};\n"],"mappings":";;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,QAAT,QAAyB,YAAzB;AACA,SAASC,IAAT,EAAeC,MAAf,QAA6B,QAA7B;AAEA,OAAO,MAAMC,OAAO,GAAG,MAAM;EAAA;;EAC5B,MAAM,CAACC,KAAD,IAAUJ,QAAQ,EAAxB,CAD4B,CACA;;EAE5B,MAAMK,eAAe,GAAID,KAAD,IAAW;IAClC;IACA,MAAME,cAAc,GAAGF,KAAK,CAACG,KAAN,CAAY,GAAZ,EAAiB,CAAjB,CAAvB;IACA,OAAOC,IAAI,CAACC,KAAL,CAAWR,IAAI,CAACK,cAAD,CAAf,CAAP;EACA,CAJD;;EAMA,MAAM,CAACI,IAAD,EAAOC,OAAP,IAAkBb,QAAQ,CAAC,MAAM;IACtC,IAAI,CAACM,KAAL,EAAY,OAAO,IAAP;IACZ,OAAOC,eAAe,CAACD,KAAD,CAAtB,CAFsC,CAEP;EAC/B,CAH+B,CAAhC;EAKAL,SAAS,CAAC,MAAM;IACf,IAAI,CAACK,KAAL,EAAY;MACXO,OAAO,CAAC,IAAD,CAAP;IACA,CAFD,MAEO;MACNA,OAAO,CAACN,eAAe,CAACD,KAAD,CAAhB,CAAP;IACA;EACD,CANQ,EAMN,CAACA,KAAD,CANM,CAAT;EAQA,OAAOM,IAAP;AACA,CAvBM;;GAAMP,O;UACIH,Q"},"metadata":{},"sourceType":"module"}